<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bundle.css" />
    <title>Device Orchestration Template</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="bundle.js"></script>
    <script>
      const SEQUENCE_URL_LOOP = 'audio/clicks-and-tone/loop.json';
      const SEQUENCE_URL_MAIN = 'audio/clicks-and-tone/sequence.json';
      const CONTENT_ID_LOOP = 'bbcat-orchestration-template:loop';
      const CONTENT_ID_MAIN = 'bbcat-orchestration-template:main';

      // Any value specified in config.js may be overwritten here without having to rebuild the app.
      const config = {
        JOIN_URL: location.protocol + '//' + location.host + '/#!/join',
        LOCAL_SESSION_ID_PREFIX: 'bbcat-orchestration-template',
        CLOUDSYNC_ENDPOINT: { hostname: 'cloudsync.virt.ch.bbc.co.uk' },
        INITIAL_CONTENT_ID: CONTENT_ID_LOOP,
        SEQUENCE_URLS: [
          {
            contentId: CONTENT_ID_LOOP,
            url: SEQUENCE_URL_LOOP,
            hold: false,
            skippable: true,
            next: [
              {
                contentId: CONTENT_ID_MAIN,
                label: 'Continue',
              },
            ],
          },
          {
            contentId: CONTENT_ID_MAIN,
            url: SEQUENCE_URL_MAIN,
            hold: true,
            skippable: false,
            next: [
              {
                contentId: CONTENT_ID_MAIN,
                label: 'Listen Again',
              },
            ],
          },
        ],
        TEXT_TITLE: 'Device Orchestration Template',
        TEXT_INTRODUCTION: 'This template is a starting point for a custom user interface for your orchestrated audio experience.',
        TEXT_START_LABEL: 'Create Session',
        TEXT_JOIN_LABEL: 'Join',
        ACCENT_COLOUR: '#3cf',
        CONTROLS: [
          {
            controlId: 'radio-buttons',
            controlName: 'Radio buttons',
            controlType: 'radio',
            controlDefaultValues: ['none'],
            controlParameters: {
              options: [
                { value: 'foo', label: 'Foo' },
                { value: 'bar', label: 'Bar' },
                { value: 'other', label: 'Other' },
              ],
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              { behaviourType: 'allowedEverywhere' },
            ],
          },
          {
            controlId: 'checkboxes',
            controlName: 'Checkboxes',
            controlType: 'checkbox',
            controlDefaultValues: ['foo', 'bar'],
            controlParameters: {
              options: [
                { value: 'foo', label: 'Foo' },
                { value: 'bar', label: 'Bar' },
                { value: 'other', label: 'Other' },
              ],
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              { behaviourType: 'allowedEverywhere' },
            ],
          },
          {
            controlId: 'slider',
            controlName: 'Slider',
            controlType: 'range',
            controlDefaultValues: [0],
            controlParameters: {
              min: -1.0,
              max: 1.0,
              step: 0.1,
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              { behaviourType: 'allowedEverywhere' },
            ],
          },
          {
            controlId: 'map-position',
            controlName: 'Map position',
            controlType: 'coordinate',
            controlDefaultValues: [0, 0],
            controlParameters: {
              xMin: 0,
              xMax: 1,
              xStep: 0.1,
              yMin: 0,
              yMax: 1,
              yStep: 0.1,
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              { behaviourType: 'allowedEverywhere' },
            ],
          },
          {
            controlId: 'text',
            controlName: 'Text',
            controlType: 'text',
            controlDefaultValues: ['hello world'],
            controlParameters: {
              length: 128,
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              {
                behaviourType: 'allowedIf',
                behaviourParameters: {
                  conditions: [
                    { property: 'device.deviceJoiningNumber', operator: 'greaterThan', value: 2 },
                  ],
                }
              },
            ],
          },
          {
            controlId: 'counter-button',
            controlName: 'Counter button',
            controlType: 'counter',
            controlDefaultValues: [0],
            controlParameters: {
              step: 1,
              label: 'Shuffle',
            },
            controlBehaviours: [
              { behaviourType: 'spread' },
              { behaviourType: 'allowedEverywhere' },
              { behaviourType: 'mainDeviceOnly' },
            ],
          },
        ],
      };

      // Instantiate the React app to render into the #app div:
      initOrchestrationTemplate(document.getElementById('app'), config);
    </script>
    <noscript>
      This page requires JavaScript to be enabled.
    </noscript>
  </body>
</html>
