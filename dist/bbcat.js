var bbcat=function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.dash=e.core=void 0;var a=n(1),i=r(a),o=n(90),u=r(o);e.core=i,e.dash=u,e["default"]={core:i,dash:u}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AudioLoader=e.Loader=e.DocumentParser=e.CompoundNode=e.EventTarget=void 0;var a=n(2),i=r(a),o=n(8),u=r(o),s=n(53),f=r(s),c=n(54),l=r(c),d=n(85),p=r(d);e.EventTarget=i["default"],e.CompoundNode=u["default"],e.DocumentParser=f["default"],e.Loader=l["default"],e.AudioLoader=p["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=r(a),o=n(4),u=r(o),s=function(){function t(){(0,i["default"])(this,t),this._listeners={}}return(0,u["default"])(t,[{key:"addEventListener",value:function(t,e){-1===this._getListenerIdx(t,e)&&(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e))}},{key:"removeEventListener",value:function(t,e){var n=this._getListenerIdx(t,e);n>=0&&this._listeners[t].splice(n,1)}},{key:"dispatchEvent",value:function(t){var e=this._listeners[t.type];if(e)for(var n=0;n<e.length;n++)e[n].call(null,t)}},{key:"_getListenerIdx",value:function(t,e){var n=this._listeners[t];if(n)for(var r=0;r<n.length;r++)if(n[r]===e)return r;return-1}}]),t}();e["default"]=s},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=n(5),i=r(a);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(6),__esModule:!0}},function(t,e,n){var r=n(7);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),i=r(a),o=n(3),u=r(o),s=n(4),f=r(s),c=n(21),l=r(c),d=n(46),p=r(d),h=n(2),_=r(h),v=function(t){function e(t){(0,u["default"])(this,e);var n=(0,l["default"])(this,(0,i["default"])(e).call(this));return n._context=t,n._inputs=[],n._outputs=[],n}return(0,p["default"])(e,t),(0,f["default"])(e,[{key:"connect",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return t instanceof e?this._outputs[n].connect(t._inputs[r]):this._outputs[n].connect(t,0,r),t}},{key:"disconnect",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];t instanceof e?this._outputs[n].disconnect(t._inputs[r]):this._outputs[n].disconnect(t,0,r)}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._inputs.length}},{key:"numberOfOutputs",get:function(){return this._outputs.length}}]),e}(_["default"]);e["default"]=v},function(t,e,n){t.exports={"default":n(10),__esModule:!0}},function(t,e,n){n(11),t.exports=n(17).Object.getPrototypeOf},function(t,e,n){var r=n(12);n(14)("getPrototypeOf",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(13);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(15),a=n(17),i=n(20);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},function(t,e,n){var r=n(16),a=n(17),i=n(18),o="prototype",u=function(t,e,n){var s,f,c,l=t&u.F,d=t&u.G,p=t&u.S,h=t&u.P,_=t&u.B,v=t&u.W,m=d?a:a[e]||(a[e]={}),y=d?r:p?r[e]:(r[e]||{})[o];d&&(n=e);for(s in n)f=!l&&y&&s in y,f&&s in m||(c=f?y[s]:n[s],m[s]=d&&"function"!=typeof y[s]?n[s]:_&&f?i(c,r):v&&y[s]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[o]=t[o],e}(c):h&&"function"==typeof c?i(Function.call,c):c,h&&((m[o]||(m[o]={}))[s]=c))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(19);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=n(22),i=r(a);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";var r=n(23)["default"];e["default"]=function(t){return t&&t.constructor===r?"symbol":typeof t},e.__esModule=!0},function(t,e,n){t.exports={"default":n(24),__esModule:!0}},function(t,e,n){n(25),n(45),t.exports=n(17).Symbol},function(t,e,n){"use strict";var r=n(7),a=n(16),i=n(26),o=n(27),u=n(15),s=n(28),f=n(20),c=n(31),l=n(32),d=n(34),p=n(33),h=n(35),_=n(39),v=n(40),m=n(41),y=n(42),g=n(36),b=n(30),x=r.getDesc,S=r.setDesc,O=r.create,k=_.get,w=a.Symbol,M=a.JSON,P=M&&M.stringify,T=!1,D=p("_hidden"),E=r.isEnum,j=c("symbol-registry"),I=c("symbols"),N="function"==typeof w,C=Object.prototype,A=o&&f(function(){return 7!=O(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=x(C,e);r&&delete C[e],S(t,e,n),r&&t!==C&&S(C,e,r)}:S,L=function(t){var e=I[t]=O(w.prototype);return e._k=t,o&&T&&A(C,t,{configurable:!0,set:function(e){i(this,D)&&i(this[D],t)&&(this[D][t]=!1),A(this,t,b(1,e))}}),e},F=function(t){return"symbol"==typeof t},B=function(t,e,n){return n&&i(I,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=O(n,{enumerable:b(0,!1)})):(i(t,D)||S(t,D,b(1,{})),t[D][e]=!0),A(t,e,n)):S(t,e,n)},U=function(t,e){y(t);for(var n,r=v(e=g(e)),a=0,i=r.length;i>a;)B(t,n=r[a++],e[n]);return t},R=function(t,e){return void 0===e?O(t):U(O(t),e)},G=function(t){var e=E.call(this,t);return e||!i(this,t)||!i(I,t)||i(this,D)&&this[D][t]?e:!0},W=function(t,e){var n=x(t=g(t),e);return!n||!i(I,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n},q=function(t){for(var e,n=k(g(t)),r=[],a=0;n.length>a;)i(I,e=n[a++])||e==D||r.push(e);return r},z=function(t){for(var e,n=k(g(t)),r=[],a=0;n.length>a;)i(I,e=n[a++])&&r.push(I[e]);return r},J=function(t){if(void 0!==t&&!F(t)){for(var e,n,r=[t],a=1,i=arguments;i.length>a;)r.push(i[a++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),F(e)?void 0:e}),r[1]=e,P.apply(M,r)}},K=f(function(){var t=w();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))});N||(w=function(){if(F(this))throw TypeError("Symbol is not a constructor");return L(d(arguments.length>0?arguments[0]:void 0))},s(w.prototype,"toString",function(){return this._k}),F=function(t){return t instanceof w},r.create=R,r.isEnum=G,r.getDesc=W,r.setDesc=B,r.setDescs=U,r.getNames=_.get=q,r.getSymbols=z,o&&!n(44)&&s(C,"propertyIsEnumerable",G,!0));var H={"for":function(t){return i(j,t+="")?j[t]:j[t]=w(t)},keyFor:function(t){return h(j,t)},useSetter:function(){T=!0},useSimple:function(){T=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=p(t);H[t]=N?e:L(e)}),T=!0,u(u.G+u.W,{Symbol:w}),u(u.S,"Symbol",H),u(u.S+u.F*!N,"Object",{create:R,defineProperty:B,defineProperties:U,getOwnPropertyDescriptor:W,getOwnPropertyNames:q,getOwnPropertySymbols:z}),M&&u(u.S+u.F*(!N||K),"JSON",{stringify:J}),l(w,"Symbol"),l(Math,"Math",!0),l(a.JSON,"JSON",!0)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(29)},function(t,e,n){var r=n(7),a=n(30);t.exports=n(27)?function(t,e,n){return r.setDesc(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(16),a="__core-js_shared__",i=r[a]||(r[a]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(7).setDesc,a=n(26),i=n(33)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(31)("wks"),a=n(34),i=n(16).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||a)("Symbol."+t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(7),a=n(36);t.exports=function(t,e){for(var n,i=a(t),o=r.getKeys(i),u=o.length,s=0;u>s;)if(i[n=o[s++]]===e)return n}},function(t,e,n){var r=n(37),a=n(13);t.exports=function(t){return r(a(t))}},function(t,e,n){var r=n(38);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(36),a=n(7).getNames,i={}.toString,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return a(t)}catch(e){return o.slice()}};t.exports.get=function(t){return o&&"[object Window]"==i.call(t)?u(t):a(r(t))}},function(t,e,n){var r=n(7);t.exports=function(t){var e=r.getKeys(t),n=r.getSymbols;if(n)for(var a,i=n(t),o=r.isEnum,u=0;i.length>u;)o.call(t,a=i[u++])&&e.push(a);return e}},function(t,e,n){var r=n(38);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(43);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=!0},function(t,e){},function(t,e,n){"use strict";var r=n(47)["default"],a=n(49)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=r(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a?a(t,e):t.__proto__=e)},e.__esModule=!0},function(t,e,n){t.exports={"default":n(48),__esModule:!0}},function(t,e,n){var r=n(7);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){t.exports={"default":n(50),__esModule:!0}},function(t,e,n){n(51),t.exports=n(17).Object.setPrototypeOf},function(t,e,n){var r=n(15);r(r.S,"Object",{setPrototypeOf:n(52).set})},function(t,e,n){var r=n(7).getDesc,a=n(43),i=n(42),o=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n(18)(Function.call,r(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=r(a),o=n(4),u=r(o),s=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];(0,i["default"])(this,t),this._models=e,this._parsers=n}return(0,u["default"])(t,[{key:"parse",value:function(t){var e=t.childNodes[0],n=this._models[e.nodeName];return this._parse(e,n)}},{key:"_parse",value:function(t,e){for(var n=e.attributes||[],r=e.nodes||[],a={},i=0;i<n.length;i++){var o=n[i];a[o.name]=this._parseAttribute(t,o)}for(var i=0;i<r.length;i++){var u=r[i];a[u.name]=this._parseNode(t,u)}return a}},{key:"_parseAttribute",value:function(t,e){var n=t.getAttribute(e.name)||e["default"],r=this._parsers[e.type];return r?r.call(null,n):n}},{key:"_parseNode",value:function(t,e){var n=e.node||e.name,r=this._getChildNodes(t,n);return 0===r.length?null:"many"===e.mapping?this._parseNodeMany(r,e):this._parseNodeOne(r[0],e)}},{key:"_parseNodeMany",value:function(t,e){for(var n=[],r=0;r<t.length;r++)n.push(this._parseNodeOne(t[r],e));return n}},{key:"_parseNodeOne",value:function(t,e){var n=this._models[e.type];return n?this._parse(t,n):this._flattenNodeToAttribute(t,e)}},{key:"_flattenNodeToAttribute",value:function(t,e){var n=t.textContent||e["default"],r=this._parsers[e.type];return r?r.call(null,n):n}},{key:"_getChildNodes",value:function(t,e){for(var n=[],r=0;r<t.childNodes.length;r++){var a=t.childNodes[r],i=a.nodeName;e.toLowerCase()===i.toLowerCase()&&n.push(a)}return n}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=r(a),o=n(3),u=r(o),s=n(4),f=r(s),c=function(){function t(e){(0,u["default"])(this,t),this._responseType=e||"arraybuffer"}return(0,f["default"])(t,[{key:"load",value:function(t){return t instanceof Array?this._loadAll(t):this._loadOne(t)}},{key:"_loadOne",value:function(t){return this._request(t)}},{key:"_loadAll",value:function(t){var e=this;return i["default"].all(t.map(function(t){return e._loadOne(t)}))}},{key:"_request",value:function(t){var e=this;return new i["default"](function(n,r){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType=e._responseType,a.addEventListener("load",function(){200===this.status||304===this.status?n(a.response):r(new Error(this.statusText))}),a.addEventListener("error",function(){r(new Error("A transport error has occured."))}),a.send()})}}]),t}();e["default"]=c},function(t,e,n){t.exports={"default":n(56),__esModule:!0}},function(t,e,n){n(45),n(57),n(63),n(67),t.exports=n(17).Promise},function(t,e,n){"use strict";var r=n(58)(!0);n(60)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(59),a=n(13);t.exports=function(t){return function(e,n){var i,o,u=String(a(e)),s=r(n),f=u.length;return 0>s||s>=f?t?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===f||(o=u.charCodeAt(s+1))<56320||o>57343?t?u.charAt(s):i:t?u.slice(s,s+2):(i-55296<<10)+(o-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(44),a=n(15),i=n(28),o=n(29),u=n(26),s=n(61),f=n(62),c=n(32),l=n(7).getProto,d=n(33)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",_="keys",v="values",m=function(){return this};t.exports=function(t,e,n,y,g,b,x){f(n,e,y);var S,O,k=function(t){if(!p&&t in T)return T[t];switch(t){case _:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",M=g==v,P=!1,T=t.prototype,D=T[d]||T[h]||g&&T[g],E=D||k(g);if(D){var j=l(E.call(new t));c(j,w,!0),!r&&u(T,h)&&o(j,d,m),M&&D.name!==v&&(P=!0,E=function(){return D.call(this)})}if(r&&!x||!p&&!P&&T[d]||o(T,d,E),s[e]=E,s[w]=m,g)if(S={values:M?E:k(v),keys:b?E:k(_),entries:M?k("entries"):E},x)for(O in S)O in T||i(T,O,S[O]);else a(a.P+a.F*(p||P),e,S);return S}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(7),a=n(30),i=n(32),o={};n(29)(o,n(33)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(o,{next:a(1,n)}),i(t,e+" Iterator")}},function(t,e,n){n(64);var r=n(61);r.NodeList=r.HTMLCollection=r.Array},function(t,e,n){"use strict";var r=n(65),a=n(66),i=n(61),o=n(36);t.exports=n(60)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,a=n(7),i=n(44),o=n(16),u=n(18),s=n(68),f=n(15),c=n(43),l=n(42),d=n(19),p=n(69),h=n(70),_=n(52).set,v=n(75),m=n(33)("species"),y=n(76),g=n(77),b="Promise",x=o.process,S="process"==s(x),O=o[b],k=function(t){var e=new O(function(){});return t&&(e.constructor=Object),O.resolve(e)===e},w=function(){function t(e){var n=new O(e);return _(n,t.prototype),n}var e=!1;try{if(e=O&&O.resolve&&k(),_(t,O),t.prototype=a.create(O.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(27)){var r=!1;O.resolve(a.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(i){e=!1}return e}(),M=function(t,e){return i&&t===O&&e===r?!0:v(t,e)},P=function(t){var e=l(t)[m];return void 0!=e?e:t},T=function(t){var e;return c(t)&&"function"==typeof(e=t.then)?e:!1},D=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},E=function(t){try{t()}catch(e){return{error:e}}},j=function(t,e){if(!t.n){t.n=!0;var n=t.c;g(function(){for(var r=t.v,a=1==t.s,i=0,u=function(e){var n,i,o=a?e.ok:e.fail,u=e.resolve,s=e.reject;try{o?(a||(t.h=!0),n=o===!0?r:o(r),n===e.promise?s(TypeError("Promise-chain cycle")):(i=T(n))?i.call(n,u,s):u(n)):s(r)}catch(f){s(f)}};n.length>i;)u(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,a=t.p;I(a)&&(S?x.emit("unhandledRejection",r,a):(e=o.onunhandledrejection)?e({promise:a,reason:r}):(n=o.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},I=function(t){var e,n=t._d,r=n.a||n.c,a=0;if(n.h)return!1;for(;r.length>a;)if(e=r[a++],e.fail||!I(e.promise))return!1;return!0},N=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),j(e,!0))},C=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=T(t))?g(function(){var r={r:n,d:!1};try{e.call(t,u(C,r,1),u(N,r,1))}catch(a){N.call(r,a)}}):(n.v=t,n.s=1,j(n,!1))}catch(r){N.call({r:n,d:!1},r)}}};w||(O=function(t){d(t);var e=this._d={p:p(this,O,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(u(C,e,1),u(N,e,1))}catch(n){N.call(e,n)}},n(82)(O.prototype,{then:function(t,e){var n=new D(y(this,O)),r=n.promise,a=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,a.c.push(n),a.a&&a.a.push(n),a.s&&j(a,!1),r},"catch":function(t){return this.then(void 0,t)}})),f(f.G+f.W+f.F*!w,{Promise:O}),n(32)(O,b),n(83)(b),r=n(17)[b],f(f.S+f.F*!w,b,{reject:function(t){var e=new D(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(!w||k(!0)),b,{resolve:function(t){if(t instanceof O&&M(t.constructor,this))return t;var e=new D(this),n=e.resolve;return n(t),e.promise}}),f(f.S+f.F*!(w&&n(84)(function(t){O.all(t)["catch"](function(){})})),b,{all:function(t){var e=P(this),n=new D(e),r=n.resolve,i=n.reject,o=[],u=E(function(){h(t,!1,o.push,o);var n=o.length,u=Array(n);n?a.each.call(o,function(t,a){var o=!1;e.resolve(t).then(function(t){o||(o=!0,u[a]=t,--n||r(u))},i)}):r(u)});return u&&i(u.error),n.promise},race:function(t){var e=P(this),n=new D(e),r=n.reject,a=E(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return a&&r(a.error),n.promise}})},function(t,e,n){var r=n(38),a=n(33)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[a])?n:i?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(18),a=n(71),i=n(72),o=n(42),u=n(73),s=n(74);t.exports=function(t,e,n,f){var c,l,d,p=s(t),h=r(n,f,e?2:1),_=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(i(p))for(c=u(t.length);c>_;_++)e?h(o(l=t[_])[0],l[1]):h(t[_]);else for(d=p.call(t);!(l=d.next()).done;)a(d,h,l.value,e)}},function(t,e,n){var r=n(42);t.exports=function(t,e,n,a){try{return a?e(r(n)[0],n[1]):e(n)}catch(i){var o=t["return"];throw void 0!==o&&r(o.call(t)),i}}},function(t,e,n){var r=n(61),a=n(33)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[a]===t)}},function(t,e,n){var r=n(59),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e,n){var r=n(68),a=n(33)("iterator"),i=n(61);t.exports=n(17).getIteratorMethod=function(t){return void 0!=t?t[a]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(42),a=n(19),i=n(33)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[i])?e:a(n)}},function(t,e,n){var r,a,i,o=n(16),u=n(78).set,s=o.MutationObserver||o.WebKitMutationObserver,f=o.process,c=o.Promise,l="process"==n(38)(f),d=function(){var t,e,n;for(l&&(t=f.domain)&&(f.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;a=void 0,t&&t.enter()};if(l)i=function(){f.nextTick(d)};else if(s){var p=1,h=document.createTextNode("");new s(d).observe(h,{characterData:!0}),i=function(){h.data=p=-p}}else i=c&&c.resolve?function(){c.resolve().then(d)}:function(){u.call(o,d)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&f.domain};a&&(a.next=e),r||(r=e,i()),a=e}},function(t,e,n){var r,a,i,o=n(18),u=n(79),s=n(80),f=n(81),c=n(16),l=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,_=0,v={},m="onreadystatechange",y=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},g=function(t){y.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++_]=function(){u("function"==typeof t?t:Function(t),e)},r(_),_},p=function(t){delete v[t]},"process"==n(38)(l)?r=function(t){l.nextTick(o(y,t,1))}:h?(a=new h,i=a.port2,a.port1.onmessage=g,r=o(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",g,!1)):r=m in f("script")?function(t){s.appendChild(f("script"))[m]=function(){s.removeChild(this),y.call(t)}}:function(t){setTimeout(o(y,t,1),0)}),t.exports={set:d,clear:p}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){t.exports=n(16).document&&document.documentElement},function(t,e,n){var r=n(43),a=n(16).document,i=r(a)&&r(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},function(t,e,n){var r=n(28);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(17),a=n(7),i=n(27),o=n(33)("species");t.exports=function(t){var e=r[t];i&&e&&!e[o]&&a.setDesc(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(33)("iterator"),a=!1;try{var i=[7][r]();i["return"]=function(){a=!0},Array.from(i,function(){throw 2})}catch(o){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){n=!0},i[r]=function(){return o},t(i)}catch(u){}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=r(a),o=n(9),u=r(o),s=n(3),f=r(s),c=n(4),l=r(c),d=n(21),p=r(d),h=n(86),_=r(h),v=n(46),m=r(v),y=n(54),g=r(y),b=function(t){function e(t){(0,f["default"])(this,e);var n=(0,p["default"])(this,(0,u["default"])(e).call(this,"arraybuffer"));return n._context=t,n}return(0,m["default"])(e,t),(0,l["default"])(e,[{key:"load",value:function(t){return(0,_["default"])((0,u["default"])(e.prototype),"load",this).call(this,t)}},{key:"_loadOne",value:function(t){var n=this;return(0,_["default"])((0,u["default"])(e.prototype),"_loadOne",this).call(this,t).then(function(t){return n._decode(t)})}},{key:"_decode",value:function(t){var e=this;return new i["default"](function(n,r){e._context.decodeAudioData(t.slice(0),n,r)})}}]),e}(g["default"]);e["default"]=b},function(t,e,n){"use strict";var r=n(87)["default"];e["default"]=function(t,e,n){for(var a=!0;a;){var i=t,o=e,u=n;a=!1,null===i&&(i=Function.prototype);var s=r(i,o);if(void 0!==s){if("value"in s)return s.value;var f=s.get;if(void 0===f)return;return f.call(u)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=u,a=!0,s=c=void 0}},e.__esModule=!0},function(t,e,n){t.exports={"default":n(88),__esModule:!0}},function(t,e,n){var r=n(7);n(89),t.exports=function(t,e){return r.getDesc(t,e)}},function(t,e,n){var r=n(36);n(14)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.DashSourceNode=e.ManifestParser=e.ManifestLoader=void 0;var a=n(91),i=r(a),o=n(92),u=r(o),s=n(95),f=r(s);e.ManifestLoader=i["default"],e.ManifestParser=u["default"],e.DashSourceNode=f["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=r(a),o=n(9),u=r(o),s=n(3),f=r(s),c=n(4),l=r(c),d=n(21),p=r(d),h=n(86),_=r(h),v=n(46),m=r(v),y=n(54),g=r(y),b=function(t){function e(){(0,f["default"])(this,e);var t=(0,p["default"])(this,(0,u["default"])(e).call(this,"text"));return t._parser=new DOMParser,t}return(0,m["default"])(e,t),(0,l["default"])(e,[{key:"load",value:function(t){return(0,_["default"])((0,u["default"])(e.prototype),"load",this).call(this,t)}},{key:"_loadOne",value:function(t){var n=this;return(0,_["default"])((0,u["default"])(e.prototype),"_loadOne",this).call(this,t).then(function(t){return n._parse(t)})}},{key:"_parse",value:function(t){var e=this._parser.parseFromString(t,"text/xml",0);return i["default"].resolve(e)}}]),e}(g["default"]);e["default"]=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),i=r(a),o=n(3),u=r(o),s=n(21),f=r(s),c=n(46),l=r(c),d=n(1),p=n(93),h=r(p),_=n(94),v=r(_),m=function(t){function e(){return(0,u["default"])(this,e),(0,f["default"])(this,(0,i["default"])(e).call(this,h["default"],v["default"]))}return(0,l["default"])(e,t),e}(d.DocumentParser);e["default"]=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={attributes:[{name:"type",type:"string","default":"static"},{name:"minBufferTime",type:"period"},{name:"mediaPresentationDuration",type:"period"},{name:"maxSegmentDuration",type:"period"}],nodes:[{name:"programInformation",node:"ProgramInformation",type:"ProgramInformation",mapping:"one"},{name:"baseURL",node:"BaseURL",type:"string",mapping:"many"},{name:"periods",node:"Period",type:"Period",mapping:"many"}]},r={attributes:[{name:"moreInformationURL",type:"string"},{name:"lang",type:"string"}],nodes:[{name:"title",node:"Title",type:"string",mapping:"one"},{name:"source",node:"Source",type:"string",mapping:"one"},{name:"copyright",node:"Copyright",type:"string",mapping:"one"}]},a={attributes:[{name:"id",type:"integer","default":0},{name:"duration",type:"period","default":0},{name:"start",type:"integer","default":0}],nodes:[{name:"baseUrl",node:"BaseUrl",type:"string",mapping:"one"},{name:"adaptationSets",node:"AdaptationSet",type:"AdaptationSet",mapping:"many"}]},i={attributes:[{name:"id",type:"string"},{name:"mimeType",type:"string"},{name:"value",type:"integer"}],nodes:[{name:"segmentTemplate",node:"SegmentTemplate",type:"SegmentTemplate",mapping:"one"},{name:"representations",node:"Representation",type:"Representation",mapping:"many"}]},o={attributes:[{name:"duration",type:"integer","default":0},{name:"timescale",type:"integer","default":0},{name:"startNumber",type:"integer","default":1},{name:"presentationTimeOffset",type:"integer","default":0},{name:"media",type:"string"}]},u={attributes:[{name:"id",type:"integer","default":0},{name:"bandwidth",type:"integer"}]};e["default"]={MPD:n,ProgramInformation:r,Period:a,AdaptationSet:i,SegmentTemplate:o,Representation:u}},function(t,e){"use strict";function n(t){return parseInt(t,10)}function r(t){var e=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:.\d+)?)S)?/,n=null;if(e.test(t)){var r=e.exec(t);n=parseInt(r[1]||0,10)*a+parseInt(r[2]||0,10)*i+parseInt(r[3]||0,10)*o+parseInt(r[4]||0,10)*u+parseInt(r[5]||0,10)*s+parseFloat(r[6]||0)}return n}Object.defineProperty(e,"__esModule",{value:!0});var a=31536e3,i=2592e3,o=86400,u=3600,s=60;e["default"]={integer:n,period:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=r(a),o=n(9),u=r(o),s=n(3),f=r(s),c=n(4),l=r(c),d=n(21),p=r(d),h=n(46),_=r(h),v=n(1),m=n(96),y=r(m),g=n(98),b=r(g),x=function(t){function e(t,n){(0,f["default"])(this,e);var r=(0,p["default"])(this,(0,u["default"])(e).call(this,t));return r._allStreams=[],r._audioStreams=[],r._totalChannels=0,r._presentationDuration=0,r._playbackInitial=0,r._playbackOffset=0,r._playbackDuration=0,r._playbackLoop=!1,r._contextSyncTime=0,r._initStreams(n),r._initAudioGraph(),r._state="ready",r}return(0,_["default"])(e,t),(0,l["default"])(e,[{key:"start",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],a=arguments.length<=3||void 0===arguments[3]?this._presentationDuration-r:arguments[3];if("ready"===this.state){if(0>t||t>=a)throw new Error("Invalid initial. Must be a number less than duration and greater than or equal to 0.");if(e!==!1&&e!==!0)throw new Error("Invalid loop. Must be a boolean.");if(0>r||r>=this._duration)throw new Error("Invalid offset. Must be a number less than presentationDuration and greater than or equal to 0.");if(0>=a||a>this._duration-r)throw new Error("Invalid duration. Must be a number less than presentationDuration minus offset and greater than 0.");this._playbackInitial=t,this._playbackOffset=r,this._playbackDuration=a,this._playbackLoop=e,this._state="priming";var o=this._allStreams.map(function(n){return n.prime(t,e,r,a)});i["default"].all(o).then(function(){n._contextSyncTime=n.context.currentTime,n._state="playing";var t=n._allStreams.map(function(t){return new i["default"](function(e){return t.start(n._contextSyncTime,e)})});i["default"].all(t).then(function(){n._dispatchEndedEvent(),n._state="ready"})})}}},{key:"stop",value:function(){"playing"===this.state&&(this._allStreams.forEach(function(t){
return t.stop()}),this._state="ready")}},{key:"_initStreams",value:function(t){var e=this;this._presentationDuration=t.mediaPresentationDuration;var n=t.minBufferTime,r=t.baseURL[0];t.periods.forEach(function(t){t.adaptationSets.forEach(function(a){var i=a.segmentTemplate,o={id:t.id+"-"+a.id,type:a.mimeType,start:t.start+i.presentationTimeOffset,duration:t.duration,segmentStart:i.startNumber,segmentDuration:Math.floor(i.duration/i.timescale),channelCount:a.value,templateUrl:r+i.media,bufferTime:n};if(a.mimeType.indexOf("json")>-1){var u=new b["default"](e.context,o);u.metadataCallback=e._dispatchMetadataEvent.bind(e),e._allStreams.push(u)}else if(a.mimeType.indexOf("audio")>-1){var u=new y["default"](e.context,o);e._audioStreams.push(u),e._allStreams.push(u),e._totalChannels+=u.channelCount}})})}},{key:"_initAudioGraph",value:function(){var t=this,e=0;this._audioStreams.forEach(function(n){for(var r=0;r<n.output.numberOfOutputs;r++){var a=t.context.createGain();n.output.connect(a,r),t._outputs[e]=a,e++}})}},{key:"_dispatchMetadataEvent",value:function(t){this.dispatchEvent({src:this,type:"metadata",metadata:t.metadata})}},{key:"_dispatchStateChangeEvent",value:function(t){this.dispatchEvent({src:this,type:"statechange",state:t})}},{key:"_dispatchEndedEvent",value:function(){this.dispatchEvent({src:this,type:"ended"})}},{key:"playbackTime",get:function(){return"playing"===this.state?(this.context.currentTime-this._contextSyncTime+this._playbackInitial)%this._playbackDuration+this._playbackOffset:0}},{key:"presentationDuration",get:function(){return this._presentationDuration}},{key:"state",get:function(){return this._playbackState}},{key:"_state",set:function(t){this._playbackState=t,this._dispatchStateChangeEvent(t)}}]),e}(v.CompoundNode);e["default"]=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),i=r(a),o=n(3),u=r(o),s=n(4),f=r(s),c=n(21),l=r(c),d=n(86),p=r(d),h=n(46),_=r(h),v=n(1),m=n(97),y=r(m),g=function(t){function e(t,n){(0,u["default"])(this,e);var r=(0,l["default"])(this,(0,i["default"])(e).call(this,t,new v.AudioLoader(t),n));return r._primerOffset=2048/48e3,r._isStreaming=!1,r._stream.channelCount=n.channelCount,r._output=r._context.createChannelSplitter(r.channelCount),r}return(0,_["default"])(e,t),(0,f["default"])(e,[{key:"_start",value:function(){var t=this;this._isStreaming=!0,this._buffer.segments.forEach(function(e){t._startSegment(e)}),(0,p["default"])((0,i["default"])(e.prototype),"_start",this).call(this)}},{key:"_stop",value:function(){this._isStreaming=!1,this._buffer.segments.forEach(function(t){t&&t.bufferSource&&t.bufferSource.stop()}),(0,p["default"])((0,i["default"])(e.prototype),"_stop",this).call(this)}},{key:"_startSegment",value:function(t){if(t&&t.bufferSource){var e=t.when+this._contextSyncTime,n=t.offset+this._primerOffset,r=t.duration,a=this._context.currentTime-e;a<t.duration?t.bufferSource.start(a>0?0:e,a>0?n+a:n,a>0?r-a:r):t.bufferSource.start(0,0,0)}}},{key:"_addDataToSegment",value:function(t,e){for(var n=null,r=!1,a=0;!r&&a<this._buffer.segments.length;)this._buffer.segments[a].n===e&&(n=this._buffer.segments[a],n.bufferSource=this._context.createBufferSource(),n.bufferSource.buffer=t,n.bufferSource.connect(this._output),this._isStreaming&&this._startSegment(n),r=!0),a++;return n}},{key:"output",get:function(){return this._output}},{key:"channelCount",get:function(){return this._stream.channelCount}}]),e}(y["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),i=r(a),o=n(3),u=r(o),s=n(4),f=r(s),c=function(){function t(e,n,r){(0,u["default"])(this,t),this._context=e,this._contextSyncTime=0,this._loader=n,this._stream={},this._stream.id=r.id,this._stream.start=r.start,this._stream.duration=r.duration,this._stream.segmentDuration=r.segmentDuration,this._stream.segmentStart=r.segmentStart,this._stream.segmentEnd=r.segmentStart-1+Math.ceil(r.duration/r.segmentDuration),this._stream.templateUrl=r.templateUrl,this._buffer={},this._buffer.segments=[],this._buffer.frontIndex=0,this._buffer.size=Math.ceil(r.bufferTime/r.segmentDuration),this._play={},this._play.initial=0,this._play.offset=0,this._play.duration=0,this._play.loop=!1,this._play.endedCallback=null}return(0,f["default"])(t,[{key:"prime",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],a=arguments.length<=3||void 0===arguments[3]?this._stream.duration-r:arguments[3];this._play.initial=t,this._play.loop=e,this._play.offset=r,this._play.duration=a,this._buffer.segments=[],this._buffer.frontIndex=0,this._play.startOverlap=(this._stream.segmentDuration-(this._stream.start-this._play.offset)%this._stream.segmentDuration)%this._stream.segmentDuration,this._play.endOverlap=(this._stream.segmentDuration-(this._play.startOverlap+this._play.duration)%this._stream.segmentDuration)%this._stream.segmentDuration,this._play.initialOverlap=(this._stream.segmentDuration-(this._play.initial+this._stream.start-this._play.offset)%this._stream.segmentDuration)%this._stream.segmentDuration,this._play.startSegment=this._stream.segmentStart+Math.floor((this._play.offset-this._stream.start)/this._stream.segmentDuration),this._play.endSegment=this._play.startSegment-1+Math.ceil((this._play.startOverlap+this._play.duration)/this._stream.segmentDuration),this._play.initialSegment=this._stream.segmentStart+Math.floor((this._play.offset+this._play.initial-this._stream.start)/this._stream.segmentDuration),this._play.segmentsPerLoop=1+this._play.endSegment-this._play.startSegment;for(var o=[],u=function(t){var e=n._getTemplateForNthSegment(t);n._buffer.segments.push(e),e.number>=n._stream.segmentStart&&e.number<=n._stream.segmentEnd&&o.push(n._loader.load(e.url).then(function(t){n._addDataToSegment(t,e.n)}))},s=0;s<this._buffer.size;s++)u(s);return i["default"].all(o)}},{key:"start",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];this._contextSyncTime=t,this._play.endedCallback=e,this._start()}},{key:"stop",value:function(){this._stop()}},{key:"_manageBuffer",value:function(){var t=this,e=this._buffer.segments[this._buffer.frontIndex],n=e.when+e.duration,r=this._getCurrentSyncTime();r>=n&&(!this._play.loop&&e.number>=this._play.endSegment?this._end():!function(){var n=e.n+t._buffer.size,r=t._getTemplateForNthSegment(n);t._buffer.segments[t._buffer.frontIndex]=r,t._buffer.frontIndex++,t._buffer.frontIndex=t._buffer.frontIndex%t._buffer.size,r.number>=t._stream.segmentStart&&r.number<=t._stream.segmentEnd&&t._loader.load(r.url).then(function(e){t._addDataToSegment(e,r.n)})}())}},{key:"_getCurrentSyncTime",value:function(){return this._context.currentTime-this._contextSyncTime}},{key:"_getTemplateForNthSegment",value:function(t){var e=t+this._play.initialSegment-this._play.startSegment,n=this._play.loop?Math.floor(e/this._play.segmentsPerLoop):0,r=this._play.loop?e%this._play.segmentsPerLoop:e,a=this._play.startSegment+r,i=this._stream.templateUrl.replace("$Number",a),o=-this._play.startOverlap-this._play.initial+n*this._play.duration+r*this._stream.segmentDuration,u=0,s=this._stream.segmentDuration;return 0===t?(o+=this._play.initialOverlap,s-=this._play.initialOverlap,u+=this._play.initialOverlap):a===this._play.startSegment&&(o+=this._play.startOverlap,s-=this._play.startOverlap,u+=this._play.startOverlap),a===this._play.endSegment&&(s-=this._play.endOverlap),{n:t,number:a,url:i,when:o,offset:u,duration:s}}},{key:"_addDataToSegment",value:function(){}},{key:"_start",value:function(){var t=this;this.manageBufferInterval=setInterval(function(){return t._manageBuffer()},this._stream.segmentDuration/4*1e3)}},{key:"_stop",value:function(){clearInterval(this.manageBufferInterval)}},{key:"_end",value:function(){this._stop(),this._play.endedCallback()}}]),t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),i=r(a),o=n(3),u=r(o),s=n(4),f=r(s),c=n(21),l=r(c),d=n(46),p=r(d),h=n(1),_=n(97),v=r(_),m=function(t){function e(t,n){(0,u["default"])(this,e);var r=(0,l["default"])(this,(0,i["default"])(e).call(this,t,new h.Loader("json"),n));return r._metadataCallback=function(){},r}return(0,p["default"])(e,t),(0,f["default"])(e,[{key:"_addDataToSegment",value:function(t,e){for(var n=null,r=!1,a=0;!r&&a<this._buffer.segments.length;)this._buffer.segments[a].n===e&&(n=this._buffer.segments[a],n.metadata=t,this._metadataCallback(n),r=!0),a++;return n}},{key:"metadataCallback",get:function(){return this._metadataCallback},set:function(t){if(!(t&&t instanceof Function))throw new Error("Invalid parameter callback. Must be of type Function.");this._metadataCallback=t}}]),e}(v["default"]);e["default"]=m}]);